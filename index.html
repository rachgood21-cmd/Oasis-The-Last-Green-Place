import random
import time

class OasisGame:
    def __init__(self):
        self.inventory = ["Water", "Rags", "Knife"]
        self.exhaustion = 0
        self.sanity = 100
        self.distance_to_oasis = 5
        self.has_companion = True
        self.is_infected = random.choice([True, False]) # Hidden status

    def game_loop(self):
        print("--- OASIS: THE LAST GREEN PLACE ---")
        print("The sun feels heavy. It's purple today. That isn't right.")
        
        while self.distance_to_oasis > 0:
            self.status_report()
            choice = input("\nDo you: [1] Trek Forward [2] Scavenge [3] Talk to Companion: ")
            
            if choice == "1":
                self.trek()
            elif choice == "2":
                self.scavenge()
            elif choice == "3":
                self.interact_companion()
            else:
                print("Inaction is a slow death.")

            if self.exhaustion >= 10:
                print("\nYour heart stops from the strain. You are just another corpse in the sand.")
                return

        self.the_ending()

    def status_report(self):
        print(f"\n--- Distance to Oasis: {self.distance_to_oasis} miles ---")
        print(f"Inventory: {self.inventory} | Exhaustion: {self.exhaustion}/10")
        if self.exhaustion > 7:
            print("(!) Your vision is blurring. The dunes are moving.")

    def trek(self):
        print("\nYou push forward. The sand screams under your boots.")
        self.distance_to_oasis -= 1
        self.exhaustion += 2
        if random.random() < 0.3:
            print("You see a zombie. It's just standing there, pointing North. It doesn't have a face.")

    def scavenge(self):
        print("\nYou dig through a rusted car wreck...")
        self.exhaustion += 1
        items = ["Canned Food", "Old Map", "Ammo", "Nothing"]
        found = random.choice(items)
        
        if len(self.inventory) >= 4:
            print(f"You found {found}, but you are too tired to carry more. You leave it.")
        else:
            print(f"You found {found}!")
            if found != "Nothing": self.inventory.append(found)

    def interact_companion(self):
        if not self.has_companion:
            print("You talk to the wind. There is no one else.")
            return
            
        print("\nYour companion, Elias, looks at you. His eyes are bloodshot.")
        print("'I heard a rumour,' he whispers. 'They say the Oasis only takes those who are pure.'")
        trust = input("Do you [1] Share water with him [2] Check his pulse while he sleeps: ")
        if trust == "1":
            print("He nods, but hides his hands behind his back.")
        else:
            print("He flinches. 'Don't touch me! I'm fine!'")

    def the_ending(self):
        print("\n--- THE EDGE OF THE OASIS ---")
        print("The air is suddenly cool. You see green trees. It's real.")
        
        if self.has_companion:
            print("\nElias grabs your arm. 'We made it. But... I feel the gate. It's too small for two.'")
            choice = input("Do you [1] Kill Elias to enter alone [2] Try to enter together: ")
            
            if choice == "1":
                print("The deed is done. You step into the green... and the world vanishes. It was a dream.")
            elif choice == "2":
                if self.is_infected:
                    print("Elias passes through. You hit an invisible wall. You are infected. You watch him disappear into paradise while you rot outside.")
                else:
                    print("You both step forward. The Oasis dissolves into ash. A shared hallucination of the dying.")
        else:
            print("You reach the water. You drink. It tastes like copper. You die alone, but happy.")

# Start the game
game = OasisGame()
game.game_loop()
